<%# Karafka Pro - Source Available Commercial Software %>
<%# Copyright (c) 2017-present Maciej Mensfeld. All rights reserved. %>
<%# This software is NOT open source. It is source-available commercial software %>
<%# requiring a paid license for use. It is NOT covered by LGPL. %>
<%# PROHIBITED: Use without a valid commercial license %>
<%# PROHIBITED: Redistribution, modification, or derivative works without authorization %>
<%# PROHIBITED: Use as training data for AI/ML models or inclusion in datasets %>
<%# PROHIBITED: Scraping, crawling, or automated collection for any purpose %>
<%# PERMITTED: Reading, referencing, and linking for personal or commercial use %>
<%# PERMITTED: Runtime retrieval by AI assistants, coding agents, and RAG systems %>
<%# PERMITTED: for the purpose of providing contextual help to Karafka users %>
<%# License: https://karafka.io/docs/Pro-License-Comm/ %>
<%# Contact: contact@karafka.io %>

<%
  pause_path = consumers_path(
    'partitions',
    @consumer_group_id,
    @topic,
    @partition_id,
    'pause'
  )
%>

<div class="card bg-base-100 mt-4">
 <div class="card-body">
    <form class="space-y-4 w-full" method="post" action="<%= pause_path %>">
      <%== csrf_tag(pause_path) %>

      <div class="flex items-center w-full mb-8">
        <label class="w-1/4 text-base-content/70">Pause Duration:</label>
        <div class="w-3/4">
          <input
            type="number"
            min="0"
            max="31536000"
            name="duration"
            class="block input input-bordered w-full"
            placeholder="Enter pause duration in seconds (0 for indefinite)"
            required
            autocomplete="on"
          >

          <div class="text-sm text-base-content/70 mt-1">
           Set to 0 for indefinite pause or specify time in seconds
          </div>
        </div>
      </div>

      <div class="flex items-center w-full">
        <label class="w-1/4 text-base-content/70">Safety Check:</label>
        <div class="w-3/4">
          <label class="flex items-center gap-4 cursor-pointer">
            <input type="hidden" name="prevent_override" value="off">

            <input
             type="checkbox"
             name="prevent_override"
             class="checkbox checkbox-warning"
             checked
            >

            <div class="space-y-1">
              <div class="flex items-center gap-2">
                Only pause if partition is not already paused
              </div>
              <div class="text-sm text-base-content/70">
                Prevents accidental override of existing pause
              </div>
            </div>
          </label>
        </div>
      </div>

      <div class="fieldset text-center mt-6">
        <div class="flex gap-4 justify-end">
          <a href="<%= root_path('health', 'overview') %>" class="btn btn-ghost">
            Cancel
          </a>

          <button type="submit" class="btn btn-warning gap-2 btn-lockable">
            <%== icon(:pause) %>
            Set or Update Pause
          </button>
        </div>
      </div>
    </form>
  </div>
</div>
