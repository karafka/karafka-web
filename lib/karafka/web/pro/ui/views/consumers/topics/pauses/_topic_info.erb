<%# This code is part of Karafka Pro, a commercial component not licensed under LGPL. %>
<%# See LICENSE for details. %>

<div class="card bg-base-100 mt-4">
  <div class="card-body">
    <h3 class="card-title text-lg">Topic Information</h3>

    <div class="grid grid-cols-2 gap-4 mt-2">
      <div>
        <span class="text-gray-500">Topic:</span>
        <span class="font-mono"><%= @topic %></span>
      </div>
      <div>
        <span class="text-gray-500">Subscription Group:</span>
        <span class="font-mono"><%= @subscription_group.id %></span>
      </div>
      <div>
        <span class="text-gray-500">Consumer Group:</span>
        <span class="font-mono"><%= @consumer_group.id %></span>
      </div>
      <div>
        <span class="text-gray-500">Partitions (this process):</span>
        <span class="font-mono"><%= @topic_stats.partitions.count %></span>
      </div>
    </div>

    <div class="mt-4">
      <% active_count = @topic_stats.partitions.count { |p| p.poll_state == 'active' } %>
      <% paused_count = @topic_stats.partitions.count { |p| p.poll_state != 'active' } %>

      <span class="text-gray-500">Partition States (this process):</span>
      <span class="badge badge-success badge-sm ml-2"><%= active_count %> active</span>
      <span class="badge badge-warning badge-sm ml-2"><%= paused_count %> paused</span>
    </div>

    <div class="mt-2 text-sm text-gray-500">
      Note: This command will be broadcast to <strong>all consumer processes</strong> that have partitions of this topic assigned.
    </div>
  </div>
</div>
